<!doctype html><html><head>
<title>JVJ: Knight's Max Flow</title>
<link rel="stylesheet" href="styles.css">
</head>
<body><h1>JVJ: Knight's Max Flow</h1>
<h4>Time-stamp: <2019-04-20 2:26AM JVJ></h4>
<h3>Flow/Capacity </h3> 
<canvas id="grid" width="800" height="800"></canvas>
	
<h5>Count of Unused/Unplaced Edges: #</h5> 
<h6>Current Flow Value: 0  (IF SRC HAS NOT BEEN CONNECTED TO SINK IT IS 0)</h5> 


</body>
<script src="draw-stuff.js"></script>
<script src="cell.js"></script>
<script>
    	
// Draw filled rect.
function draw_title( context ) 
{
    context.save( );
    context.fillStyle = 'lightgrey';
    context.font = "30px Arial";
    context.fillText( "Grid", 150, 150 );
    context.restore();
}
var canvas = document.getElementById( "grid" ); 
var context = canvas.getContext( "2d" );
    
// Draw a grid
draw_grid( context, 80, 80, 'black', 'black' );
context.fillStyle = "#FFFFFF";
var cells = [];
for (var i = 0; i < 10; i++)
{
    for (var j = 0; j < 10; j++)
    {
        var cell = new Cell(i, j);
        cells.push(cell);
        draw_capacity(context, cell.x, cell.y - 15, "" + cell.capacity);
    }
}
  
//Draw source & sink cell
var source = cells.find(function(element){
  return element.i == 1 && element.j == 2;
});
draw_dot(context, source.x, source.y);
    
var sink = cells.find(function(element){
  return element.i == 8 && element.j == 7;
});
draw_dot(context, sink.x, sink.y);
var moves = Math.floor((Math.random() * (30 - 15 + 1)) + 15);


var totalEdges = 0; 
var icurrent = 1;
var jcurrent = 2;
var ipath = [];
var jpath = [];
var ioptions = [];
var joptions = []

//while(icurrent != sink.i && jcurrent != sink.j) 
//{
	for (var i = 0; i < ioptions.length; i++)
	{
		ioptions.pop(); // clears array of previous contents
		joptions.pop();
	}
	
	//8 possible moves will be added to options list
	if(icurrent+2 >= 0 && icurrent+2 <10 && jcurrent+1 >= 0 && jcurrent+1 < 10)
	{
		ioptions.push(icurrent+2);
		joptions.push(jcurrent+1);
	}
	if(icurrent+2 >= 0 && icurrent+2 <10 && jcurrent-1 >= 0 && jcurrent-1 < 10)
	{
		ioptions.push(icurrent+2);
		joptions.push(jcurrent-1);
	}
	if(icurrent-2 >= 0 && icurrent-2 <10 && jcurrent+1 >= 0 && jcurrent+1 < 10)
	{
		ioptions.push(icurrent-2);
		joptions.push(jcurrent+1);
	}
	if(icurrent-2 >= 0 && icurrent-2 <10 && jcurrent-1 >= 0 && jcurrent-1 < 10)
	{
		ioptions.push(icurrent-2);
		joptions.push(jcurrent-1);
	}
	if(icurrent+1 >= 0 && icurrent+1 <10 && jcurrent+2 >= 0 && jcurrent+2 < 10)
	{
		ioptions.push(icurrent+1);
		joptions.push(jcurrent+2);
	}
	if(icurrent+1 >= 0 && icurrent+1 <10 && jcurrent-2 >= 0 && jcurrent-2 < 10)
	{
		ioptions.push(icurrent+1);
		joptions.push(jcurrent-2);
	}
	if(icurrent-1 >= 0 && icurrent-1 <10 && jcurrent+2 >= 0 && jcurrent+2 < 10)
	{
		ioptions.push(icurrent-1);
		joptions.push(jcurrent+2);
	}
	if(icurrent-1 >= 0 && icurrent-1 <10 && jcurrent-2 >= 0 && jcurrent-2 < 10)
	{
		ioptions.push(icurrent-1);
		joptions.push(jcurrent-2);
	}
	
	
	//add dot to valid moves
	for (var b = 0; b < ioptions.length; b++)
	{
		var current = cells.find(function(element){
		return element.i == icurrent[b] && element.j == jcurrent[b];
		});
		 draw_dot(context, current.x, current.y);	//Needs to be fixed
		 console.log("After: position " + b + " (" + ioptions[b] + ", " + joptions[b] + ")");
	}	

</script>
</html>
